# é¡µé¢é”™è¯¯è¯Šæ–­

## ğŸ› é—®é¢˜æè¿°
- é¦–é¡µæ­£å¸¸å·¥ä½œ
- å…¶ä»–é¡µé¢ï¼ˆåŠ¨æ¼«è¯¦æƒ…ã€æ’­æ”¾é¡µé¢ã€ç³»åˆ—é¡µé¢ç­‰ï¼‰å‡ºç° 500 Internal Server Error

## ğŸ” å¯èƒ½çš„åŸå› 

### 1. APIè·¯ç”±é—®é¢˜
APIè·¯ç”±ä½¿ç”¨äº† `edge` runtimeï¼Œå¯èƒ½åœ¨Cloudflare Pagesç¯å¢ƒä¸­æœ‰å…¼å®¹æ€§é—®é¢˜ï¼š

```typescript
export const runtime = 'edge';
```

### 2. æ•°æ®è·å–é—®é¢˜
é¡µé¢åœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶è°ƒç”¨APIå¯èƒ½å¤±è´¥ï¼š
- `apiClient.getAnimeDetail()` 
- `apiClient.getEpisodePlay()`
- `apiClient.getAnimeList()`

### 3. ç¯å¢ƒå˜é‡é—®é¢˜
ç”Ÿäº§ç¯å¢ƒä¸­çš„ç¯å¢ƒå˜é‡å¯èƒ½æ²¡æœ‰æ­£ç¡®è®¾ç½®ã€‚

## ğŸ”§ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤1: æ£€æŸ¥APIè·¯ç”±æ˜¯å¦å·¥ä½œ
æµ‹è¯•ç›´æ¥è®¿é—®APIè·¯ç”±ï¼š
- `/api/anime/home` - åº”è¯¥è¿”å›JSONæ•°æ®
- `/api/anime/list` - åº”è¯¥è¿”å›åŠ¨æ¼«åˆ—è¡¨
- `/api/anime/detail/3496` - åº”è¯¥è¿”å›åŠ¨æ¼«è¯¦æƒ…

### æ­¥éª¤2: æ£€æŸ¥ç¯å¢ƒå˜é‡
ç¡®è®¤ç”Ÿäº§ç¯å¢ƒä¸­çš„ç¯å¢ƒå˜é‡ï¼š
```
NEXT_PUBLIC_API_BASE_URL=https://api-jk.funnyu.xyz
USE_MOCK_API=false
NODE_ENV=production
```

### æ­¥éª¤3: æ£€æŸ¥Edge Runtimeå…¼å®¹æ€§
Edge Runtimeå¯èƒ½ä¸æ”¯æŒæŸäº›Node.js APIæˆ–ç¬¬ä¸‰æ–¹åº“ã€‚

## ğŸš€ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ç§»é™¤Edge Runtime
å°†æ‰€æœ‰APIè·¯ç”±çš„runtimeæ”¹ä¸ºé»˜è®¤çš„Node.js runtimeï¼š

```typescript
// ç§»é™¤è¿™è¡Œ
// export const runtime = 'edge';
```

### æ–¹æ¡ˆ2: ç®€åŒ–APIè°ƒç”¨
ç›´æ¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨å¤–éƒ¨APIï¼Œä¸é€šè¿‡Next.js APIè·¯ç”±ï¼š

```typescript
// ç›´æ¥è°ƒç”¨
const response = await fetch('https://api-jk.funnyu.xyz/api/v1/anime/detail/3496');
```

### æ–¹æ¡ˆ3: æ·»åŠ é”™è¯¯å¤„ç†å’Œé™çº§
ä¸ºæ‰€æœ‰APIè°ƒç”¨æ·»åŠ æ›´å¥½çš„é”™è¯¯å¤„ç†å’Œfallbackã€‚

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨
1. æµ‹è¯•APIè·¯ç”±æ˜¯å¦æ­£å¸¸å·¥ä½œ
2. å¦‚æœAPIè·¯ç”±æœ‰é—®é¢˜ï¼Œç§»é™¤edge runtime
3. æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
4. å®ç°å®¢æˆ·ç«¯æ¸²æŸ“ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ